<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https:&#x2F;&#x2F;eips.ethereum.com&#x2F;minima.css">

        <!-- opengraph -->
        <meta property="og:locale" content="en_US" />
        <meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.com" />
        <meta property="og:site_name" content="Ethereum Improvement Proposals" />

        <!-- twitter -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@ethereum" />

        <script type="application/ld+json">
            {
              "@type": "WebSite",
              "url": "https:&#x2F;&#x2F;eips.ethereum.com",
              "name": "Ethereum Improvement Proposals",
              "description": "Description",
              "@context": "https://schema.org"
            }
        </script>

        

        

<title>EIP-823: Token Exchange Standard</title>
<link rel="canonical" href="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-823.md" />
<meta property="og:title" content="EIP-823: Token Exchange Standard" />
<meta
    name="description"
    content="Details on Ethereum Improvement Proposal 823 (EIP-823): Token Exchange Standard"
/>
<meta
    property="og:description"
    content="Details on Ethereum Improvement Proposal 823 (EIP-823): Token Exchange Standard"
/>
<meta property="og:url" content="https:&#x2F;&#x2F;eips.ethereum.comEIPS&#x2F;eip-823.md" />
<meta name="twitter:description" content="Details on Ethereum Improvement Proposal 823 (EIP 823): Token Exchange Standard" />

    </head>
    <body>
        <header class="site-header">
            <div class="wrapper">
                <a class="site-title" rel="author" href="https:&#x2F;&#x2F;eips.ethereum.com">Ethereum Improvement Proposals</a>
                <nav class="site-nav">
                    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                    <label for="nav-trigger">
                        <span class="menu-icon">
                            <svg viewBox="0 0 18 15" width="18px" height="15px">
                                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                            </svg>
                        </span>
                    </label>

                    <div class="trigger">
                        
                            <a class="page-link" href="&#x2F;all">All</a>
                        
                            <a class="page-link" href="&#x2F;core">Core</a>
                        
                            <a class="page-link" href="&#x2F;networking">Networking</a>
                        
                            <a class="page-link" href="&#x2F;interface">Interface</a>
                        
                            <a class="page-link" href="&#x2F;erc">ERC</a>
                        
                            <a class="page-link" href="&#x2F;meta">Meta</a>
                        
                            <a class="page-link" href="&#x2F;informational">Informational</a>
                        
                    </div>
                </nav>
            </div>
        </header>
        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                
<div class="home">
    <h1 class="page-heading">
        EIP-823: Token Exchange Standard
        <a href=""><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
    </h1>
    <table>
        <tr>
            <th>Author</th>
            <td>
    
        
        
            <a href="mailto:kkhullar7@gmail.com">Kashish Khullar</a>
        
    
</td>
        </tr>

        

        <tr>
            <th>Status</th>
            <td>
                Draft
                
            </td>
        </tr>

        <tr>
            <th>Type</th>
            <td>Standards Track</td>
        </tr>

        
          <tr>
              <th>Category</th>
              <td>ERC</td>
          </tr>
        

        <tr>
            <th>Created</th>
            <td>2018-01-06</td>
        </tr>

        

        
          <tr>
              <th>Requires</th>
              <td>20</td>
          </tr>
        

        

        

        
  </table>

  
    <h2 id="simple-summary">Simple Summary</h2>
<p>A standard for token contracts, providing token exchange services thereby facilitating cross token payments.</p>
<h2 id="abstract">Abstract</h2>
<p>The following standard provides functionally to make payments in the form of any other registered tokens, as well as allow token contracts to store any other tokens in an existing token contract. This standard allows ERC20 token holders to exchange their token with another ERC20 token and use the exchanged tokens to make payments. After a successful payment, the former specified ERC20 tokens, will be stored within the ERC20 token contract they are exchanged with. This proposal uses the term target contract which is used to denote the contract to the token with whom we want to exchange our tokens.</p>
<h2 id="motivation">Motivation</h2>
<p>Existing token standards do not provide functionality to exchange tokens. Existing token converters reduce the total supply of an existing token, which in the sense destroys the currency. Token converters do not solve this problem and hence discourages creation of new tokens. This solution does not destroy the existing token but in essence preserve them in the token contract that they are exchanged with, which in turn increases the market value of the latter.</p>
<h2 id="specification">Specification</h2>
<h3 id="sender-interface">Sender Interface</h3>
<p>This interface must be inherited by a ERC20 token contract that wants to exchange its tokens with another token.</p>
<h4 id="storage-variables">Storage Variables</h4>
<h5 id="exchnagedwith">exchnagedWith</h5>
<p>This mapping stores the number of tokens exchanged with another token, along with the latter’s address. Every time more tokens are exchanged the integer value is incremented consequently. This mapping acts as a record to denote which target contract holds our tokens.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">mapping ( address =&gt; uint ) private exchangedWith;
</span></code></pre><h5 id="exchangedby">exchangedBy</h5>
<p>This mapping stores the address of the person who initiated the exchange and the amount of tokens exchanged.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">mapping ( address =&gt; uint ) private exhangedBy;
</span></code></pre><h4 id="methods">Methods</h4>
<p>NOTE: Callers MUST handle false from returns (bool success). Callers MUST NOT assume that false is never returned!</p>
<h5 id="exchangetoken">exchangeToken</h5>
<p>This function calls the intermediate exchange service contract that handles the exchanges. This function takes the address of the target contract and the amount we want to exchange as parameters and returns boolean <code>success</code> and <code>creditedAmount</code>.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function exchangeToken(address _targetContract, uint _amount) public returns(bool success, uint creditedAmount)
</span></code></pre><h5 id="exchangeandspend">exchangeAndSpend</h5>
<p>This function calls an intermediate exchange service contract that handles exchange and expenditure. This function takes the address of the target contract, the amount we want to spend in terms of target contract tokens and address of the receiver as parameters and returns boolean <code>success</code>.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function exchangeAndSpend(address _targetContract, uint _amount,address _to) public returns(bool success)
</span></code></pre><h5 id="exchangercallback">__exchangerCallback</h5>
<p>This function is called by the exchange service contract to our token contract to deduct calculated amount from our balance. It takes the address of the targert contract , the address of the person who exchanged the tokens and amount to be deducted from exchangers account as parameters and returns boolean <code>success</code>.</p>
<p>NOTE: It is required that only the exchange service contract has the authority to call this function.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function __exchangerCallback(address _targetContract,address _exchanger, uint _amount) public returns(bool success)
</span></code></pre><h4 id="events">Events</h4>
<h5 id="exchange">Exchange</h5>
<p>This event logs any new exchanges that have taken place.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">event Exchange(address _from, address _ targetContract, uint _amount)
</span></code></pre><h5 id="exchangespent">ExchangeSpent</h5>
<p>This event logs any new exchange that have taken place and have been spent immediately.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">event ExchangeSpent(address _from, address _targetContract, address _to, uint _amount)
</span></code></pre><h3 id="receiver-interface">Receiver Interface</h3>
<p>This interface must be inherited by a ERC20 token contract that wants to receive exchanged tokens.</p>
<h4 id="storage-variables-1">Storage Variables</h4>
<h5 id="exchangesrecieved">exchangesRecieved</h5>
<p>This mapping stores the number of tokens received in terms of another token, along with its address. Every time more tokens are exchanged the integer value is incremented consequently. This mapping acts as a record to denote which tokens do this contract holds apart from its own.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">mapping ( address =&gt; uint ) private exchnagesReceived;
</span></code></pre><h4 id="methods-1">Methods</h4>
<p>NOTE: Callers MUST handle false from returns (bool success). Callers MUST NOT assume that false is never returned!</p>
<h5 id="targetexchangecallback">__targetExchangeCallback</h5>
<p>This function is called by the intermediate exchange service contract. This function should add <code>_amount</code> tokens of the target contract to the exchangers address for exchange to be completed successfully.</p>
<p>NOTE: It is required that only the exchange service contract has the authority to call this function.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function __targetExchangeCallback (uint _to, uint _amount) public returns(bool success)
</span></code></pre><h5 id="targetexchangeandspendcallback">__targetExchangeAndSpendCallback</h5>
<p>This function is called by the intermediate exchange service contract. This function should add <code>_amount</code> tokens of the target contract to the exchangers address and transfer it to the <code>_to</code> address for the exchange and expenditure to be completed successfully.</p>
<p>NOTE: It is required that only the exchange service contract has the authority to call this function.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function __targetExchangeAndSpendCallback (address _from, address _to, uint _amount) public returns(bool success)
</span></code></pre><h4 id="events-1">Events</h4>
<h5 id="exchange-1">Exchange</h5>
<p>This event logs any new exchanges that have taken place.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">event Exchange(address _from, address _with, uint _amount)
</span></code></pre><h5 id="exchangespent-1">ExchangeSpent</h5>
<p>This event logs any new exchange that have taken place and have been spent immediately.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">event ExchangeSpent(address _from, address _ targetContract, address _to, uint _amount)
</span></code></pre><h3 id="exchange-service-contract">Exchange Service Contract</h3>
<p>This is an intermediate contract that provides a gateway for exchanges and expenditure. This contract uses oracles to get the authenticated exchange rates.</p>
<h4 id="storage-variables-2">Storage Variables</h4>
<h5 id="registeredtokens">registeredTokens</h5>
<p>This array stores all the tokens that are registered for exchange. Only register tokens can participate in exhanges.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">address[] private registeredTokens;
</span></code></pre><h4 id="methods-2">Methods</h4>
<h5 id="registertoken">registerToken</h5>
<p>This function is called by the owner of the token contract to get it’s tokens registered. It takes the address of the token as the parameter and return boolean <code>success</code>.</p>
<p>NOTE: Before any exchange it must be ensured that the token is registered.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function registerToken(address _token) public returns(bool success)
</span></code></pre><h5 id="exchangetoken-1">exchangeToken</h5>
<p>This function is called by the token holder who wants to exchange his token with the <code>_targetContract</code> tokens. This function queries the exchange rate, calculates the converted amount, calls <code>__exchangerCallback</code> and calls the <code>__targetExchangeCallback</code>. It takes address of the target contract and amount to exchange as parameter and returns boolean <code>success</code> and amount credited.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function exchangeToken(address _targetContract, uint _amount, address _from) public returns(bool success, uint creditedAmount)
</span></code></pre><h5 id="exchangeandspend-1">exchangeAndSpend</h5>
<p>This function is called by the token holder who wants to exchange his token with the <code>_targetContract</code> tokens. This function queries the exchange rate, calculates the converted amount, calls <code>__exchangerCallback</code> and calls the <code>__targetExchangeAndSpendCallback</code>. It takes address of the target contract and amount to exchange as parameter and returns boolean <code>success</code> and amount credited.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">function exchangeAndSpend(address _targetContract, uint _amount, address _from, address _to) public returns(bool success)
</span></code></pre><h4 id="events-2">Events</h4>
<h5 id="exchanges">Exchanges</h5>
<p>This event logs any new exchanges that have taken place.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">event Exchange( address _from, address _by, uint _value ,address _target )
</span></code></pre><h5 id="exchangeandspent">ExchangeAndSpent</h5>
<p>This event logs any new exchange that have taken place and have been spent immediately.</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">event ExchangeAndSpent ( address _from, address _by, uint _value ,address _target ,address _to)
</span></code></pre><h3 id="diagramatic-explanation">Diagramatic Explanation</h3>
<h4 id="exchanging-tokens">Exchanging Tokens</h4>
<p><img src="../assets/eip-823/eip-823-token-exchange-standard-visual-representation-1.png" alt="token-exchange-standard-visual-representation-1" /></p>
<p>NOTE: After the successful exchange the contract on right owns some tokens of the contract on the left.</p>
<h4 id="exchanging-and-spending-tokens">Exchanging And Spending Tokens</h4>
<p><img src="../assets/eip-823/eip-823-token-exchange-standard-visual-representation-2.png" alt="token-exchange-standard-visual-representation-2" /></p>
<p>NOTE: After the successful exchange the contract on right owns some tokens of the contract on the left.</p>
<h2 id="rationale">Rationale</h2>
<p>Such a design provides a consistent exchange standard 
applicable to all ERC20 tokens that follow it.
The primary advantage for of this strategy is that the exchanged tokens will not be lost. They can either be spent or preserved.
Token convert face a major drawback of destroying tokens after conversion. This mechanism treats tokens like conventional currency where tokens are not destroyed but are stored.</p>
<h2 id="backward-compatibility">Backward Compatibility</h2>
<p>This proposal is fully backward compatible. Tokens extended by this proposal should also be following ERC20 standard. The functionality of ERC20 standard should not be affected by this proposal but will provide additional functionality to it.</p>
<h2 id="copyright">Copyright</h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>



            </div>
        </main>


        <footer class="site-footer h-card">
            <div class="wrapper">
                <h2 class="footer-heading">Ethereum Improvement Proposals</h2>
                <div class="footer-col-wrapper">
                    <div class="footer-col footer-col-1">
                        <ul class="contact-list">
                            <li class="p-name">
                                
                                GitHub User
                                
                            </li>
                            <li>
                                <a class="u-email" href="mailto:your-email@domain.com">
                                  your-email@domain.com
                                </a>
                              </li>
                            </ul>
                    </div>
                    <div class="footer-col footer-col-3">
                        <p>Description</p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
